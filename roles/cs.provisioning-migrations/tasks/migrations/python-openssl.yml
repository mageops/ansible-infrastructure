# Before we installed `pyOpenSSL` from PIP and it worked fine but now it
# breaks `openssl_privatekey` module because of upgrade to ansible 2.9.
# It seems that ansible loads newer pyOpenSSL, however it also loads
# old `cryptography` module from system instead of the newerr version
# pulled as dependency by PIP.
- name: Uninstall conflicting PIP python module packages
  pip:
    name: pyOpenSSL
    state: absent

- name: Uninstall conflicting RPM python module packages
  yum:
    name:
      - pyOpenSSL
      - python-cryptography
    state: absent

- name: Ensure python cryptography in installed as system package
  yum:
    name: python-cryptography
    state: present